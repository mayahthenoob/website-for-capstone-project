1ï¸âƒ£ Database (MySQL)

Create a MySQL database in InfinityFree and run this SQL:

CREATE TABLE notes (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    body TEXT NOT NULL,
    updated DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

2ï¸âƒ£ Backend (PHP API)

Create a folder:

/api

ğŸ”¹ api/db.php
<?php
$host = "sqlXXX.infinityfree.com";
$db   = "your_db_name";
$user = "your_db_user";
$pass = "your_db_password";

$conn = new mysqli($host, $user, $pass, $db);

if ($conn->connect_error) {
    die("Database connection failed");
}
?>

ğŸ”¹ api/notes.php
<?php
require "db.php";
header("Content-Type: application/json");

$method = $_SERVER["REQUEST_METHOD"];

switch ($method) {

    case "GET":
        $result = $conn->query("SELECT * FROM notes ORDER BY updated DESC");
        echo json_encode($result->fetch_all(MYSQLI_ASSOC));
        break;

    case "POST":
        $data = json_decode(file_get_contents("php://input"), true);

        $title = $conn->real_escape_string($data["title"]);
        $body  = $conn->real_escape_string($data["body"]);

        $conn->query("INSERT INTO notes (title, body) VALUES ('$title', '$body')");
        echo json_encode(["success" => true]);
        break;

    case "PUT":
        $data = json_decode(file_get_contents("php://input"), true);

        $id    = (int)$data["id"];
        $title = $conn->real_escape_string($data["title"]);
        $body  = $conn->real_escape_string($data["body"]);

        $conn->query("UPDATE notes SET title='$title', body='$body' WHERE id=$id");
        echo json_encode(["success" => true]);
        break;

    case "DELETE":
        parse_str($_SERVER["QUERY_STRING"], $params);
        $id = (int)$params["id"];

        $conn->query("DELETE FROM notes WHERE id=$id");
        echo json_encode(["success" => true]);
        break;
}

3ï¸âƒ£ Replace NotesAPI.js (Frontend API)
ğŸ”¹ js/NotesAPI.js
export default class NotesAPI {
    static async getAllNotes() {
        const res = await fetch("api/notes.php");
        return await res.json();
    }

    static async saveNote(note) {
        const method = note.id ? "PUT" : "POST";

        await fetch("api/notes.php", {
            method,
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(note)
        });
    }

    static async deleteNote(id) {
        await fetch(`api/notes.php?id=${id}`, {
            method: "DELETE"
        });
    }
}

4ï¸âƒ£ Update App.js (async support)
ğŸ”¹ js/App.js
import NotesView from "./NotesView.js";
import NotesAPI from "./NotesAPI.js";

export default class App {
    constructor(root) {
        this.notes = [];
        this.activeNote = null;
        this.view = new NotesView(root, this._handlers());

        this._refreshNotes();
    }

    async _refreshNotes() {
        const notes = await NotesAPI.getAllNotes();
        this._setNotes(notes);

        if (notes.length > 0) {
            this._setActiveNote(notes[0]);
        }
    }

    _setNotes(notes) {
        this.notes = notes;
        this.view.updateNoteList(notes);
        this.view.updateNotePreviewVisibility(notes.length > 0);
    }

    _setActiveNote(note) {
        this.activeNote = note;
        this.view.updateActiveNote(note);
    }

    _handlers() {
        return {
            onNoteSelect: noteId => {
                const note = this.notes.find(n => n.id == noteId);
                this._setActiveNote(note);
            },

            onNoteAdd: async () => {
                await NotesAPI.saveNote({
                    title: "New Note",
                    body: "Take note..."
                });
                this._refreshNotes();
            },

            onNoteEdit: async (title, body) => {
                if (!this.activeNote) return;

                await NotesAPI.saveNote({
                    id: this.activeNote.id,
                    title,
                    body
                });
                this._refreshNotes();
            },

            onNoteDelete: async noteId => {
                await NotesAPI.deleteNote(noteId);
                this._refreshNotes();
            }
        };
    }
}

5ï¸âƒ£ Folder Structure (Final)
/api
   â”œâ”€â”€ db.php
   â””â”€â”€ notes.php
/css
/js
   â”œâ”€â”€ App.js
   â”œâ”€â”€ NotesAPI.js
   â””â”€â”€ NotesView.js
index.html

