<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Word Search</title>

<style>
:root {
  --current-color: #ffd166;
}

body {
  font-family: Arial, sans-serif;
  background: #f5f5f5;
  display: flex;
  justify-content: center;
  padding: 40px;
}

.container {
  background: white;
  border-radius: 20px;
  padding: 20px 30px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}

.grid {
  display: grid;
  grid-template-columns: repeat(10, 38px);
  gap: 6px;
}

.cell {
  position: relative;
  width: 38px;
  height: 38px;
  line-height: 38px;
  text-align: center;
  font-weight: 600;
  user-select: none;
  cursor: pointer;
  z-index: 0;
}

/* Base highlight */
.cell.selected::before,
.cell.found::before {
  content: "";
  position: absolute;
  inset: -4px;
  background: var(--current-color);
  z-index: -1;
  transform: scale(0.85);
  opacity: 0;
  animation: pop 120ms ease-out forwards;
}

/* Middle cells = square */
.cell.middle::before {
  border-radius: 0;
}

/* Start / End caps */
.cell.start::before,
.cell.end::before {
  border-radius: 14px;
}

/* Diagonal smoothing */
.cell.diagonal::before {
  inset: -6px;
}

.cell.selected,
.cell.found {
  color: white;
}

@keyframes pop {
  to {
    transform: scale(1);
    opacity: 1;
  }
}
</style>
</head>

<body>

<div class="container">
  <div class="grid" id="grid"></div>
</div>

<script>
const gridData = [
  "ANGRYSEVYN",
  "XRPETKYALS",
  "RNVAPAMIGH",
  "FNVEAHDOLA",
  "FMRCAUDSAP",
  "AWATCMDAPY",
  "ROLLAKEADP",
  "GIAEMOHOLS",
  "LEUANDMBIL",
  "SADHAPPYXX"
];

const grid = document.getElementById("grid");

let selected = [];
let isSelecting = false;
let direction = null;

function buildGrid() {
  gridData.forEach((row, r) => {
    row.split("").forEach((letter, c) => {
      const cell = document.createElement("div");
      cell.className = "cell";
      cell.textContent = letter;
      cell.dataset.row = r;
      cell.dataset.col = c;

      cell.addEventListener("mousedown", () => start(cell));
      cell.addEventListener("mouseenter", () => drag(cell));
      document.addEventListener("mouseup", end);

      grid.appendChild(cell);
    });
  });
}

function start(cell) {
  clear();
  isSelecting = true;
  select(cell);
}

function drag(cell) {
  if (!isSelecting || selected.includes(cell)) return;

  if (selected.length === 1) {
    lockDirection(selected[0], cell);
  }

  if (direction && !isOnLine(cell)) return;
  select(cell);
}

function end() {
  isSelecting = false;
  direction = null;
  updateCaps();
}

function select(cell) {
  cell.classList.add("selected");
  selected.push(cell);
  updateCaps();
}

function lockDirection(a, b) {
  const dx = Math.sign(b.dataset.col - a.dataset.col);
  const dy = Math.sign(b.dataset.row - a.dataset.row);
  direction = { dx, dy };

  if (dx !== 0 && dy !== 0) {
    selected.forEach(c => c.classList.add("diagonal"));
  }
}

function isOnLine(cell) {
  const first = selected[0];
  const dr = cell.dataset.row - first.dataset.row;
  const dc = cell.dataset.col - first.dataset.col;

  return (
    (direction.dx === 0 && dc === 0) ||
    (direction.dy === 0 && dr === 0) ||
    (Math.abs(dr) === Math.abs(dc) &&
     Math.sign(dc) === direction.dx &&
     Math.sign(dr) === direction.dy)
  );
}

function updateCaps() {
  selected.forEach(c => c.classList.remove("start", "middle", "end"));

  if (selected.length === 1) {
    selected[0].classList.add("start", "end");
    return;
  }

  selected.forEach((c, i) => {
    if (i === 0) c.classList.add("start");
    else if (i === selected.length - 1) c.classList.add("end");
    else c.classList.add("middle");
  });
}

function clear() {
  selected.forEach(c => c.className = "cell");
  selected = [];
}

buildGrid();
</script>

</body>
</html>
